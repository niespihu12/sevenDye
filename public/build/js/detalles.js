function img(e,t){document.querySelector(".image").src=e,document.querySelectorAll(".producto-gallery .image-box").forEach((e=>e.classList.remove("active"))),t&&t.classList.add("active")}const radios=document.querySelectorAll('input[name="radio"]');radios.forEach((e=>{e.addEventListener("change",(function(){const e=this.getAttribute("data-precio");if(e){document.getElementById("precio-producto").textContent="<?php echo MONEDA ?>"+e}}))}));const addToCartButtons=document.querySelectorAll(".add-to-cart");addToCartButtons.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("data-id"),o=this.getAttribute("data-token"),n=document.querySelector(".contador-input").value,a=document.querySelector('input[name="radio"]:checked');if(!a)return void alert("Selecciona una talla");const r=a.value;fetch("/carrito/agregar",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`id=${encodeURIComponent(t)}&token=${encodeURIComponent(o)}&cantidad=${encodeURIComponent(n)}&talla=${encodeURIComponent(r)}`}).then((e=>e.json())).then((e=>{e.ok&&(alert("Producto aÃ±adido al carrito"),window.location.reload())})).catch((e=>console.error("Error:",e)))}))}));const decremento=document.getElementById("decremento"),incremento=document.getElementById("incremento"),input=document.querySelector(".contador-input");decremento.addEventListener("click",(e=>{e.preventDefault(),parseInt(input.value)>parseInt(input.min)&&(input.value=parseInt(input.value)-1)})),incremento.addEventListener("click",(e=>{e.preventDefault(),parseInt(input.value)<parseInt(input.max)&&(input.value=parseInt(input.value)+1)}));const btnWishlist=document.getElementById("btn-wishlist");btnWishlist.addEventListener("click",(async function(){const e=this.dataset.producto,t=this.querySelector("i"),o=t.classList.contains("fas");try{let n,a;o?(n="/deseos/eliminar",a="POST"):(n="/deseos/guardar",a="POST");const r=await fetch(n,{method:a,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({producto:e})}),c=await r.json();c.resultado?(o?t.classList.replace("fas","far"):t.classList.replace("far","fas"),console.log(c.mensaje),alert(c.mensaje||(o?"Removed from wishlist":"Added to wishlist")),window.location.reload()):(alert(c.mensaje||"An error occurred"),"Usuario no autenticado"==c.mensaje&&(window.location.href="/login"))}catch(e){console.error("Error:",e),alert("Error processing your request")}}));