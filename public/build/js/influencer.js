document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("avatarDrop"),t=document.getElementById("imagen");let n=document.getElementById("avatarPreview");const a=document.getElementById("avatarSize"),o=document.getElementById("avatarError");function r(e){e.preventDefault(),e.stopPropagation()}function d(){e.classList.add("highlight")}function i(){e.classList.remove("highlight")}function s(e){if(e.length>0){const t=e[0];if(!["image/jpeg","image/png","image/webp"].includes(t.type))return void(o.textContent="Formato no válido. Solo JPG, PNG o WEBP.");if(t.size>5242880)return void(o.textContent="El archivo es demasiado grande (máx 5MB).");o.textContent="",a.textContent=function(e){if(0===e)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]}(t.size);const r=new FileReader;r.onload=function(e){if("IMG"===n.tagName)n.src=e.target.result;else{const t=document.createElement("img");t.src=e.target.result,t.className="profile-avatar-upload-wide__img",t.id="avatarPreview",n.replaceWith(t),n=t}},r.readAsDataURL(t)}}t.addEventListener("change",(function(e){s(e.target.files)})),["dragenter","dragover","dragleave","drop"].forEach((t=>{e.addEventListener(t,r,!1)})),["dragenter","dragover"].forEach((t=>{e.addEventListener(t,d,!1)})),["dragleave","drop"].forEach((t=>{e.addEventListener(t,i,!1)})),e.addEventListener("drop",(function(e){s(e.dataTransfer.files)}));const c=document.getElementById("descripcion"),l=document.getElementById("descCounter");c&&l&&(c.addEventListener("input",(function(){const e=this.value.length;l.textContent=`${e}/300`,l.style.color=e>=300?"#ff0000":"#808080"})),c.dispatchEvent(new Event("input")))}));