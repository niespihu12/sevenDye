document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("testimonialAvatarDrop"),t=document.getElementById("imagen");let n=document.getElementById("testimonialAvatarPreview");const a=document.getElementById("testimonialAvatarSize"),o=document.getElementById("testimonialAvatarError");function i(e){e.preventDefault(),e.stopPropagation()}function r(){e.classList.add("highlight")}function d(){e.classList.remove("highlight")}function s(e){if(e.length>0){const t=e[0];if(!["image/jpeg","image/png","image/webp"].includes(t.type))return void(o.textContent="Formato no válido. Solo JPG, PNG o WEBP.");if(t.size>5242880)return void(o.textContent="El archivo es demasiado grande (máx 5MB).");o.textContent="",a.textContent=function(e){if(0===e)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+n[a]}(t.size);const i=new FileReader;i.onload=function(e){if("IMG"===n.tagName)n.src=e.target.result;else{const t=document.createElement("img");t.src=e.target.result,t.className="testimonial-avatar-upload-wide__img",t.id="testimonialAvatarPreview",n.replaceWith(t),n=t}},i.readAsDataURL(t)}}t.addEventListener("change",(function(e){s(e.target.files)})),["dragenter","dragover","dragleave","drop"].forEach((t=>{e.addEventListener(t,i,!1)})),["dragenter","dragover"].forEach((t=>{e.addEventListener(t,r,!1)})),["dragleave","drop"].forEach((t=>{e.addEventListener(t,d,!1)})),e.addEventListener("drop",(function(e){s(e.dataTransfer.files)}));const l=document.getElementById("mensaje"),c=document.getElementById("testimonialCounter");l&&c&&l.addEventListener("input",(function(){c.textContent=this.value.length+" characters"}))}));